sonify
======

|docs_badge| |build_badge|

This tool “squeezes” seismic or infrasound signals into audible frequencies and
creates animated spectrograms to accompany the audio. Data are pulled from the
`IRIS DMC <https://ds.iris.edu/ds/nodes/dmc/>`__.

|screenshot|

This project `won an Honorable Mention
<https://jhepc.github.io/2020/entry_11/index.html>`__ in the 2020 SciPy `John
Hunter Excellence in Plotting Contest (JHEPC) <https://jhepc.github.io/>`__.

Quickstart
----------

1. Obtain

   .. code-block:: xml

     git clone https://github.com/liamtoney/sonify.git
     cd sonify

2. Create environment, install, and activate

   .. code-block:: xml

     conda env create
     conda activate sonify

3. Run using the Python interpreter

   .. code-block:: python

     python
     >>> from sonify import sonify

   or via the command-line interface

   .. code-block:: xml

     sonify --help

Example
-------

To make a movie of the seismic signal generated by a massive avalanche
occurring in Alaska on 21 June 2019, sped up by a factor of 200:

.. ~BEGIN~
.. code-block:: python

   from sonify import sonify
   from obspy import UTCDateTime

   sonify(
       network='AV',
       station='ILSW',
       channel='BHZ',
       starttime=UTCDateTime(2019, 6, 20, 23, 10),
       endtime=UTCDateTime(2019, 6, 21, 0, 30),
       freqmin=1,
       freqmax=23,
       speed_up_factor=200,
       fps=1,  # Use fps=60 to ~recreate the JHEPC entry (slow to save!)
       spec_win_dur=8,
       db_lim=(-180, -130),
   )
.. ~END~

Or (equivalently), via the command-line interface:

.. code-block:: xml

  sonify AV ILSW BHZ 2019-06-20T23:10 2019-06-21T00:30 --freqmin 1 --freqmax 23 --speed_up_factor 200 --fps 1 --spec_win_dur 8 --db_lim -180 -130

The result is a 4K 1fps video file named ``AV_ILSW_BHZ_200x.mp4``. A screenshot
of the movie is shown at the top of this README.

Documentation
-------------

API documentation for the module is available
`here <https://sonify.readthedocs.io/en/latest/sonify.html>`__. For command-line
usage instructions, type ``sonify --help`` (the ``sonify`` conda environment must
be active).

.. |docs_badge| image:: https://readthedocs.org/projects/sonify/badge/?version=latest
   :target: https://sonify.readthedocs.io/

.. |build_badge| image:: https://github.com/liamtoney/sonify/workflows/build/badge.svg
   :target: https://github.com/liamtoney/sonify/actions/workflows/build.yml

.. |screenshot| image:: screenshot.png
